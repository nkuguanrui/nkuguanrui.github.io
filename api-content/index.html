{"posts":[{"title":" [研报复现]基于随机森林的多因子选股模型","content":"本项目参考了华泰证券研报《人工智能选股之随机森林模型》，项目绝大内容与研报类似，项目地址为：人工智能选股之随机森林模型，网址为：https://github.com/nkuguanrui/portfolio_select_with_random_forest。 随机森林 随机森林利用了Bagging思想，集合多个决策树的决策，最终达到“三个臭皮匠顶个诸葛亮”效果，如图1。有关随机森林具体做法可以参考研报和相关书籍。 因子选择 选择A股市场中表现较好的因子，如表1 表1：因子 大类因子 具体因子 因子描述 价值 pe_ttm 市盈率，股票的价格和每股收益的比率 价值 pb_ttm 市净率，每股股价与每股净资产的比率 价值 ps_ttm 市销率，总市值与主营业务收入的比率 价值 pcf_ttm 市现率，股票价格与每股现金流量的比率 价值 dividendyield 股息率，一年的总派息额与当时市价的比例 价值 g_pe 净利润（TTM）同比增长率/PE_TTM 成长 sales_g 营业收入（TTM）同比增长率 成长 sales_g_3y 营业收入三年复合增长率 成长 profit_g 净利润（TTM）同比增长率 成长 profit_g_3y 净利润三年复合增长率 成长 ocf_g 经营性现金流（TTM）同比增长率 成长 roe_g ROE（TTM）同比增长率 市值 ln_capital 总市值取对数 动量反转 return_Nm 个股最近N个月收益率，N=1,3,6,12 动量反转 wgt_return_Nm 个股最近N个月内用每日换手率乘以每日收益率求算术平均值N=1,3,6,12 动量反转 exp_wgt_return_Nm 个股最近N个月内用每日换手率乘以函数exp(-x_i/N/4)再乘以每日收益率求算术平均值，x_i为该日距离截面日的交易日的数,N=1,3,6,12 波动率 std_ff3factor_Nm 特质波动率——个股最近N个月内用日频收益率对FF三因子模型回归的残差的标准差，N=1,3,6,12 波动率 std_Nm 个股最近N个月的日收益率序列标准差，N=1,3,6,12 股价 ln_price 股价取对数 情绪 rating_average wind评级的平均值 情绪 rating_targetprice wind一致目标价/现价-1 股东 holder_avgpctchange 户均持股比例的同比增长率 技术 MACD 经典技术指标，长周期取30日，短周期取10日，计算DEA均线的周期（中周期）取15日 技术 DEA 经典技术指标，长周期取30日，短周期取10日，计算DEA均线的周期（中周期）取15日 技术 DIF 经典技术指标，长周期取30日，短周期取10日，计算DEA均线的周期（中周期）取15日 财务质量因子 roe_ttm 净资产收益率 财务质量因子 eps_ttm 每股收益 财务质量因子 ebit_ttm 税前利润率，税前利润比当期的销售收入 杠杆 currentratio 流动比率，流动负债/流动资产 杠杆 debtequityratio 非流动负债/净资产 换手率 bias_turn_Nm 个股最近N个月内日均换手率除以最近2年内日均换手率（剔除停牌、涨跌停的交易日）再减去1，N=1,3,6,12 模型构建 数据处理 数据获取 股票池：沪深300动态股票池月度数据。 回测区间：2010-01-01到2020-06-01 换仓期：在每个自然月最后一个交易日核算因子值，在下个自然月首个交易日按当日收盘价换仓。 数据来源：wind+聚宽 数据预处理 缺失值：拉格朗日插值法 极端值：MAD中位数去极值 标准化：最大最小标准化 特征与标签 特征：表1中50个因子 标签：在每个月末截面期，选取下月收益排名前 30%的股票作为正例（y = 1） ，后 30%的 股票作为负例（y = 0） 单测试集回测 训练集测试集划分 训练集区间：2010-01-01到2016-12-31 测试集区间：2017-01-01到2020-05-01 训练集参数寻优 KFold交叉验证 超参数：n_estimators;max_features;min_samples_leaf;min_samples_split 测试集回测 长时间跨度测试集回测 模型参数固定，可能会失效 回测指标 年化收益率 年化波动率 夏普比率 最大回撤 IR信息比率 超额收益 净值 滚动分层回测（多测试集回测） 行业中性策略 将随机森林预测值是为单因子，分别从各个行业中选出预测值排名靠前的N只股票等权配置。 等权重策略 将随机森林预测值是为单因子，直接从股票池中选取预测值排名靠前的N只股票等权配置。 实证研究 分别进行滚动行业中性策略，滚动等权重策略，行业中性单测试集策略，等权重单测试集策略。 滚动等权重策略 滚动窗口长度t：12，18，24 股票池N：10，20，50 回测区间：2017-2020 手续费：0.15% 滚动行业中性策略 滚动窗口长度t：12，18，24 单行业股票池N：2，5，10 回测区间：2017-2020 手续费：0.15% 等权重单测试集策略 股票池N：10，20，50 回测区间：2017-2020 手续费：0.15% 行业中性单测试集策略 单行业股票池N：2，5，10 回测区间：2017-2020 手续费：0.15% 实证结论 等权重策略随机森林选股策略可以获得稳定的超额收益，行业中性策略效果不明显，下面展示滚动等权重策略（t:12;N:10)，单测试集等权重策略（N:10)和HS300指数的净值走势，如图2。注：策略手续费0.15%，指数手续费0%。 代码和数据 项目地址为：人工智能选股之随机森林模型，网址为：https://github.com/nkuguanrui/portfolio_select_with_random_forest 未经授权不得转载或转载请注明出处 ","link":"https://nkuguanrui.github.io/post/ji-yu-sui-ji-sen-lin-de-duo-yin-zi-xuan-gu-mo-xing/"},{"title":" [原创]中国波指（000188）编制（python）","content":"中国波指编制；中国波动率指数；复现中国波指000188；python； 中国波指介绍 上证 50 ETF 波动率指数是基于上海证券交易所挂牌的 50 ETF 期权合约编制而成，反映投资者对未来 30 天 50 ETF 波动率的预期。上证 50 ETF 波动率指数不仅是反映投资者情绪的重要指标，也是衍生产品的重要标的，可作为投资者管控风险的有力工具。由于种种原因，中国波指在2018年停止发布本。项目目的是严格按照官方发布的指数编制方法重新复现波动率指数，数据和代码详见项目主页中国波指python编制，网址：https://github.com/nkuguanrui/ivx。 指数名称：上证 50 ETF 波动率指数 指数简称：中国波指 英文名称：SSE 50 ETF Volatility Index 英文简称：iVX 指数代码：000188 计算方法 上证 50 ETF 波动率指数是基于方差互换原理，采用上证 50 ETF 期权相关数据计算而得。具体计算方法参考中证指数有限公司分布的《上证50ETF波动率指数编制方案》。 指数复现 由于种种原因，中国波指在2018年官方停止发布，本项目利用python和期权数据，严格按照中国波指官方编制方案，对中国波指进行复制，目的是为了可以获得最新的中国波指数据，方面投资者进行风险管控。 数据来源 wind数据库，上证50ETF期权日度数据 方法 python+《上证50ETF波动率指数编制方案》 结论 复现的波动率指数和中国波指相似度高达98.3%，达到实践可用水平,如图。 数据和代码 数据和代码详见项目主页中国波指python编制,网址：https://github.com/nkuguanrui/ivx。 未经授权不得转载或转载请注明出处 ","link":"https://nkuguanrui.github.io/post/zhong-guo-bo-zhi-000188bian-zhi-python/"}]}